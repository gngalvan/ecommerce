<div>
  <div class="TitleProds" style="text-align: center;">
    <h2 class="titleSection">PRODUCTS</h2>
  </div>
  <div name="cart" class="boxCart" style="text-align: right;">
    <button class="butttonCart" onclick="goToCart()" style="background-color: transparent; border: none; cursor: pointer;">
      <img class="iconCart" src="https://cdn.icon-icons.com/icons2/1863/PNG/512/shopping-cart_118662.png">
      <span class="cart-badge" id="quantityBadge" style="background-color: red; color: white; border-radius: 50%; padding: 4px 8px; position: absolute; top: 10px; right: 10px;">0</span>
    </button>
    <div id="user-profile" class="panelUser" style="text-align: right; margin-right: 20px;">
      <button id="logout" style="background-color: transparent; border: none; cursor: pointer;">
        <p id="usernameProfile" style="margin: 0; font-weight: bold;">{{products.user.username}}</p>
        <p id="emailProfile" style="margin: 0;">{{products.user.email}}</p>
        <p id="adminProfile" style="margin: 0;">{{products.user.role}}</p>
      </button>
      <button id="logout" style="background-color: transparent; border: none; cursor: pointer;"><a href="/" style="text-decoration: none; color: black;">Profile</a></button>
      <button id="logout" onclick="logout()" style="background-color: transparent; border: none; cursor: pointer;">Logout</button>
    </div>
  </div>
  <div class="box" style="display: flex; flex-wrap: wrap; justify-content: space-between;">
    {{#each products.products}}
    <div class="product" id="product" style="background-color: #f5f5f5; border: 1px solid #ddd; border-radius: 5px; margin: 10px; padding: 10px; text-align: center; width: 30%; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
      <div class="cardHead"></div>
      <p class="title" style="font-weight: bold;">{{this.title}}</p>
      <p style="display: none;" id="idProd">{{this._id}}</p>
      <img class="image" src="{{this.thumbnails.[0]}}" style="max-width: 100%; height: auto;">
      <p class="description" style="margin: 10px 0;">{{this.description}}</p>
      <p class="price" style="font-weight: bold; font-size: 1.2em; color: green;">${{this.price}}</p>
      {{#if this.stock}}
      <p style="font-weight: bold; color: green;">Available</p>
      <div id="cartButtons" style="display: flex; justify-content: center; align-items: center;">
        <button id="reduceQuantity" onclick="reduce(this)" style="background-color: transparent; border: none; cursor: pointer; font-weight: bold;">-</button>
        <p id="quantityValue" style="font-weight: bold; margin: 0 10px;">1</p>
        <button id="incrementQuantity" onclick="increment(this)" style="background-color: transparent; border: none; cursor: pointer; font-weight: bold;">+</button>
      </div>
      <div class="cartButtonBox" style="text-align: center;">
        <button id="addToCart" onclick="addToCart(this)" style="background-color: green; color: white; border: none; padding: 5px 10px; cursor: pointer; font-weight: bold;">Add to cart</button>
      </div>
      {{else}}
      <div style="text-align: center;">
        <button class="notAvailable" style="background-color: red; color: white; border: none; cursor: not-allowed; font-weight: bold;">Not available</button>
      </div>
      {{/if}}
      <div class="cardfooter"></div>
    </div>
    {{/each}}
  </div>
  <nav name="paginado" style="text-align: center; margin-top: 20px;">
    <div id="back" style="display: inline-block;">
      <button onclick="navigateTo('{{products.pagination.prevPage}}')" style="background-color: transparent; border: 1px solid #333; padding: 5px 10px; cursor: pointer;">Back</button>
    </div>
    <div name="pageBox" class="pageBox" style="display: inline-block; margin: 0 10px;">
      <p id="page" style="font-weight: bold; font-size: 1.2em; color: #333;">{{products.pagination.page}}</p>
    </div>
    <div id="next" style="display: inline-block;">
      <button onclick="navigateTo('{{products.pagination.nextPage}}')" style="background-color: transparent; border: 1px solid #333; padding: 5px 10px; cursor: pointer;">Next</button>
    </div>
  </nav>
</div>
<div id="modal-flotante" style="position: fixed; bottom: 10px; right: 10px; z-index: 999;">
  <div id="modal-contenido">
    <a href="/chat" class="btn-chat" style="text-decoration: none; background-color: blue; color: white; padding: 10px 20px; border-radius: 5px; font-weight: bold;">Chat</a>
  </div>
</div>

<script src="/js/products.js"></script>